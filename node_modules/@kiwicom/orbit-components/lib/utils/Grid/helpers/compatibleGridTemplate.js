"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _splitToWords = _interopRequireDefault(require("./splitToWords"));

var _insertGap = _interopRequireDefault(require("./insertGap"));

/*
  This function is firstly converting "repeat(3, 1fr) 2fr" to plain format that is compatible with IE
  For simplicity, the IE compatible format "(1fr)[3]" for repeat is not used
  Also if gap is defined, it adds gap after each column/row
 */
var compatibleGridTemplate = function compatibleGridTemplate(cells, gap) {
  var cellsMap = (0, _splitToWords.default)(cells);
  var plainCells = cellsMap && cellsMap.map(function (item) {
    if (/repeat\((.*\))/g.test(item)) {
      var values = /repeat\((\d+),\s(.*\)?)\)/g.exec(item);
      return values && Array.apply(void 0, (0, _toConsumableArray2.default)(Array(Number(values[1])))).map(function () {
        return values[2];
      }).join(" ");
    }

    return item;
  }).join(" ");

  if (!gap) {
    return plainCells;
  }

  return (0, _insertGap.default)(plainCells, gap);
};

var _default = compatibleGridTemplate;
exports.default = _default;